# W5-04: Implement Awareness Subscribe Handler

> **Summary:** Handle AWARENESS_SUBSCRIBE to send current awareness state for all clients connected to a document.

[← Back to Phase 5](README.md) | [Phase Document](../PHASE-5-AWARENESS.md)

---

**Priority:** P0  
**Estimate:** 3 hours  
**Dependencies:** W5-02

## Description

Handle AWARENESS_SUBSCRIBE to send current awareness state for a document.

## Response Message

Returns AWARENESS_STATE with all active awareness entries for the document:

```json
{
  "type": "awareness_state",
  "id": "msg-1",
  "timestamp": 1234567890,
  "documentId": "doc-1",
  "states": [
    {
      "clientId": "clientA",
      "state": { "userId": "alice", "cursor": { "x": 100, "y": 200 } },
      "clock": 1
    }
  ]
}
```

## Acceptance Criteria

- [ ] Auth required for awareness subscribe
- [ ] Returns all active awareness for document
- [ ] Expired entries not included
- [ ] AWARENESS_STATE message format correct

---

**Status:** ⬜ Not Started

# W5-01: Create Awareness State Model

> **Summary:** Define the data structures for awareness state tracking including client identity, cursor position, selection, and arbitrary custom state.

[← Back to Phase 5](README.md) | [Phase Document](../PHASE-5-AWARENESS.md)

---

**Priority:** P0  
**Estimate:** 3 hours  
**Dependencies:** None

## Description

Define the data structures for awareness state tracking.

## Tasks

1. Create `AwarenessState.cs` class
2. Create `AwarenessEntry.cs` class
3. Support arbitrary state payloads
4. Track local clocks for each client

## Implementation

```csharp
// SyncKit.Server/Awareness/AwarenessState.cs
public class AwarenessState
{
    public string ClientId { get; init; } = null!;
    public string? UserId { get; set; }
    public string? UserName { get; set; }
    public string? UserColor { get; set; }
    public JsonElement? Cursor { get; set; }
    public JsonElement? Selection { get; set; }
    public long Clock { get; set; }
    public DateTime LastUpdated { get; set; }
    
    // Arbitrary additional state
    public Dictionary<string, JsonElement>? CustomState { get; set; }
}

// SyncKit.Server/Awareness/AwarenessEntry.cs
public class AwarenessEntry
{
    public string DocumentId { get; init; } = null!;
    public string ClientId { get; init; } = null!;
    public AwarenessState State { get; set; } = null!;
    public long Clock { get; set; }
    public DateTime ExpiresAt { get; set; }
}
```

## JSON Format

```json
{
  "clientId": "client-abc",
  "userId": "user-123",
  "userName": "Alice",
  "userColor": "#FF5733",
  "cursor": {
    "x": 100,
    "y": 200,
    "elementId": "editor-1"
  },
  "selection": {
    "start": 10,
    "end": 25
  },
  "clock": 42,
  "customState": {
    "typing": true,
    "lastActive": 1702900000000
  }
}
```

## Acceptance Criteria

- [ ] AwarenessState holds all standard fields
- [ ] Custom state supported via dictionary
- [ ] Clock tracks version for each client
- [ ] Expiration tracked for cleanup

---

**Status:** ⬜ Not Started

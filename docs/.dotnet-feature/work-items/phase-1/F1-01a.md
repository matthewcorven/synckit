# F1-01a: Add .editorconfig and Directory.Build.props

> **Summary:** Add `.editorconfig` for consistent code style enforcement and `Directory.Build.props` for shared project settings, following Microsoft's .NET coding conventions.

[← Back to Phase 1](README.md) | [Phase Document](../PHASE-1-FOUNDATION.md)

---

**Priority:** P0  
**Estimate:** 1 hour  
**Dependencies:** F1-01

## Description

Add `.editorconfig` for consistent code style enforcement following [Microsoft's .NET coding conventions](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/code-style-rule-options). Also add `Directory.Build.props` for shared project settings.

## Tasks

1. Create `.editorconfig` with Microsoft .NET conventions
2. Create `Directory.Build.props` for shared settings
3. Enable nullable reference types
4. Enable implicit usings
5. Configure analyzer severity levels

## .editorconfig

```editorconfig
# server/csharp/src/.editorconfig
# Top-most EditorConfig file
root = true

# All files
[*]
indent_style = space
indent_size = 4
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

# XML project files
[*.{csproj,vbproj,vcxproj,props,targets}]
indent_size = 2

# JSON files
[*.json]
indent_size = 2

# YAML files
[*.{yml,yaml}]
indent_size = 2

# Markdown files
[*.md]
trim_trailing_whitespace = false

# C# files
[*.cs]
# Organize usings
dotnet_sort_system_directives_first = true
dotnet_separate_import_directive_groups = false

# this. preferences
dotnet_style_qualification_for_field = false:suggestion
dotnet_style_qualification_for_property = false:suggestion
dotnet_style_qualification_for_method = false:suggestion
dotnet_style_qualification_for_event = false:suggestion

# Language keywords vs BCL types preferences
dotnet_style_predefined_type_for_locals_parameters_members = true:suggestion
dotnet_style_predefined_type_for_member_access = true:suggestion

# var preferences
csharp_style_var_for_built_in_types = false:suggestion
csharp_style_var_when_type_is_apparent = true:suggestion
csharp_style_var_elsewhere = false:suggestion

# File-scoped namespace
csharp_style_namespace_declarations = file_scoped:suggestion

# New line preferences
csharp_new_line_before_open_brace = all
csharp_new_line_before_else = true
csharp_new_line_before_catch = true
csharp_new_line_before_finally = true

# Naming conventions
dotnet_naming_rule.interface_should_be_begins_with_i.severity = suggestion
dotnet_naming_rule.interface_should_be_begins_with_i.symbols = interface
dotnet_naming_rule.interface_should_be_begins_with_i.style = begins_with_i

# Analyzer rules
dotnet_diagnostic.CA1848.severity = suggestion  # Use LoggerMessage for performance
dotnet_diagnostic.CA2007.severity = none        # Don't require ConfigureAwait (ASP.NET Core)
dotnet_diagnostic.IDE0005.severity = warning    # Remove unnecessary usings
```

## Directory.Build.props

```xml
<!-- server/csharp/src/Directory.Build.props -->
<Project>
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
    <EnforceCodeStyleInBuild>true</EnforceCodeStyleInBuild>
    <AnalysisLevel>latest-recommended</AnalysisLevel>
  </PropertyGroup>

  <PropertyGroup>
    <Authors>SyncKit Contributors</Authors>
    <Company>SyncKit</Company>
    <Product>SyncKit Server</Product>
    <Copyright>Copyright © 2024-2025 SyncKit Contributors</Copyright>
    <RepositoryUrl>https://github.com/synckit/synckit</RepositoryUrl>
    <RepositoryType>git</RepositoryType>
  </PropertyGroup>

  <ItemGroup>
    <!-- Enable code analysis -->
    <PackageReference Include="Microsoft.CodeAnalysis.NetAnalyzers" Version="9.*">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
    </PackageReference>
  </ItemGroup>
</Project>
```

## Acceptance Criteria

- [ ] `.editorconfig` enforces consistent code style
- [ ] `Directory.Build.props` applies to all projects in solution
- [ ] Nullable reference types enabled
- [ ] Code analysis enabled with recommended rules
- [ ] IDE shows style violations as suggestions/warnings

---

**Status:** ⬜ Not Started

# V7-05: Run Chaos Tests

> **Summary:** Run and pass all 86 chaos tests for fault tolerance including network partition, server restart, message loss, clock skew, and connection storms.

[← Back to Phase 7](README.md) | [Phase Document](../PHASE-7-TESTING.md)

---

**Priority:** P0  
**Estimate:** 4 hours  
**Dependencies:** V7-03

## Description

Run and pass all 86 chaos tests for fault tolerance and recovery.

## Chaos Scenarios

| Scenario | Description |
|----------|-------------|
| Network partition | Simulate network splits |
| Server restart | Recovery after restart |
| Message loss | Handle dropped messages |
| Clock skew | Handle time drift |
| Slow client | Back-pressure handling |
| Malformed messages | Invalid input handling |
| Connection storms | Rapid connect/disconnect |
| Memory pressure | Low memory conditions |

## Validation Commands

### Against TypeScript Server (baseline)

```bash
cd tests
bun test chaos/
```

### Against C# Server

```bash
cd tests
TEST_SERVER_TYPE=csharp bun test chaos/
```

### Against External Server

```bash
cd tests
SYNCKIT_SERVER_URL=ws://localhost:8080/ws bun test chaos/
```

## Fault Injection

```typescript
// Example chaos test setup
const chaos = new ChaosProxy({
  target: 'ws://localhost:8080/ws',
  latency: { min: 10, max: 500 },
  dropRate: 0.05,
  reorderRate: 0.02
});
```

## Acceptance Criteria

- [ ] All 86 chaos tests pass against TypeScript server (baseline)
- [ ] All 86 chaos tests pass against C# server
- [ ] Both servers recover from all fault scenarios
- [ ] No data corruption in either implementation
- [ ] Proper error messages sent (matching between implementations)
- [ ] Timeouts handled correctly and consistently

---

**Status:** ⬜ Not Started

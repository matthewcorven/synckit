# V7-02: Run Binary Protocol Tests

> **Summary:** Run and pass all 7 binary protocol tests validating wire format compatibility, endianness, type codes, and round-trip encoding.

[← Back to Phase 7](README.md) | [Phase Document](../PHASE-7-TESTING.md)

---

**Priority:** P0  
**Estimate:** 3 hours  
**Dependencies:** V7-01

## Description

Run and pass all 7 binary protocol tests against the .NET server.

## Test Files

- `tests/binary/binary-protocol.test.ts`
- `tests/binary/binary-roundtrip.test.ts`

## Expected Tests

| Test | Description |
|------|-------------|
| Binary message encoding | Correct header format |
| Binary message decoding | Parse header correctly |
| Type code mapping | All codes match |
| Endianness | Big-endian for multi-byte |
| Round-trip | Encode → decode matches |
| Large payloads | Handle >64KB messages |
| Invalid binary | Graceful error handling |

## Validation Command

```bash
cd tests
SYNCKIT_SERVER_URL=ws://localhost:8080/ws bun test binary/
```

## Troubleshooting Guide

| Issue | Likely Cause | Fix |
|-------|--------------|-----|
| Header parse fail | Endianness wrong | Use `BinaryPrimitives` with BigEndian |
| Wrong type code | Mapping mismatch | Check `MessageTypeCode` enum |
| Truncated message | Payload length wrong | Verify uint32 read |

## Acceptance Criteria

- [ ] All 7 binary tests pass
- [ ] Wire format matches TypeScript
- [ ] No test timeouts
- [ ] Error cases handled

---

**Status:** ⬜ Not Started

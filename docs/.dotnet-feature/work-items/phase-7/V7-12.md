# V7-12: High-Performance Logging (Optional)

> **Summary:** Add LoggerMessage.Define source-generated logging for hot paths to reduce allocation overhead - an optimization for high-throughput scenarios.

[← Back to Phase 7](README.md) | [Phase Document](../PHASE-7-TESTING.md)

---

**Priority:** P2  
**Estimate:** 1 hour  
**Dependencies:** V7-07

## Description

Add `LoggerMessage.Define` source-generated logging for hot paths to reduce allocation overhead. This follows [Microsoft's high-performance logging guidance](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/logging/loggermessage).

> **Note:** This is an optimization for high-throughput scenarios. Standard Serilog logging is sufficient for most deployments.

## Implementation

```csharp
// SyncKit.Server/Logging/LogMessages.cs
public static partial class LogMessages
{
    [LoggerMessage(
        EventId = 1001,
        Level = LogLevel.Debug,
        Message = "Delta received for document {DocumentId} from client {ClientId}")]
    public static partial void DeltaReceived(
        ILogger logger, string documentId, string clientId);

    [LoggerMessage(
        EventId = 1002,
        Level = LogLevel.Debug,
        Message = "Broadcasting to {SubscriberCount} subscribers for document {DocumentId}")]
    public static partial void BroadcastingDelta(
        ILogger logger, int subscriberCount, string documentId);

    [LoggerMessage(
        EventId = 2001,
        Level = LogLevel.Warning,
        Message = "Connection {ConnectionId} authentication timeout")]
    public static partial void AuthTimeout(
        ILogger logger, string connectionId);
}
```

## Usage

```csharp
// In hot path:
LogMessages.DeltaReceived(_logger, documentId, clientId);
```

## Acceptance Criteria

- [ ] Hot path logging uses `LoggerMessage.Define`
- [ ] Zero-allocation logging verified in benchmarks
- [ ] Event IDs documented for log analysis

---

**Status:** ⬜ Not Started

# V7-07: Create Performance Benchmarks

> **Summary:** Create detailed BenchmarkDotNet performance benchmarks for protocol parsing, serialization, and vector clock operations with comparison to TypeScript server.

[← Back to Phase 7](README.md) | [Phase Document](../PHASE-7-TESTING.md)

---

**Priority:** P1  
**Estimate:** 4 hours  
**Dependencies:** V7-04

## Description

Create detailed performance benchmarks comparing .NET and TypeScript servers.

## Benchmark Suite

```csharp
// server/csharp/src/benchmarks/SyncBenchmarks.cs
[MemoryDiagnoser]
[SimpleJob(RuntimeMoniker.Net90)]
public class SyncBenchmarks
{
    [Benchmark]
    public IMessage? JsonParse() => _jsonHandler.Parse(_jsonMessage);

    [Benchmark]
    public IMessage? BinaryParse() => _binaryHandler.Parse(_binaryMessage);

    [Benchmark]
    public ReadOnlyMemory<byte> JsonSerialize() => _jsonHandler.Serialize(message);

    [Benchmark]
    public ReadOnlyMemory<byte> BinarySerialize() => _binaryHandler.Serialize(message);

    [Benchmark]
    public VectorClock VectorClockMerge() => clock1.Merge(clock2);
}
```

## Expected Results

| Method | Mean | Allocated |
|--------|------|-----------|
| JsonParse | 2.5 μs | 1.2 KB |
| BinaryParse | 1.8 μs | 0.9 KB |
| JsonSerialize | 1.5 μs | 0.8 KB |
| BinarySerialize | 0.8 μs | 0.4 KB |
| VectorClockMerge | 0.2 μs | 256 B |

## Running Benchmarks

```bash
cd server/csharp
dotnet run -c Release --project benchmarks/
```

## Acceptance Criteria

- [ ] Benchmarks for all critical paths
- [ ] Memory allocation tracked
- [ ] Results documented
- [ ] Comparison with TypeScript
- [ ] Performance targets met

---

**Status:** ⬜ Not Started
